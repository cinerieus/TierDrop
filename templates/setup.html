<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TierDrop â€” Setup</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="login-container">
        <div class="setup-card">
            <div class="brand">
                <div class="logo"><svg viewBox="0 0 32 32" fill="currentColor"><path d="M16 3C16 3 6 15 6 21c0 5.52 4.48 10 10 10s10-4.48 10-10C26 15 16 3 16 3z"/></svg></div>
                <h1><span>Tier</span>Drop</h1>
                <p>Initial Setup</p>
            </div>

            {% if let Some(error) = error %}
            <div class="login-error">{{ error }}</div>
            {% endif %}

            <form method="POST" action="/setup">
                <div class="setup-section">
                    <h3 class="setup-section-title">Admin Account</h3>
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input
                            type="text"
                            id="username"
                            name="username"
                            class="form-input"
                            placeholder="Choose a username"
                            autocomplete="username"
                            required
                            autofocus
                        >
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input
                                type="password"
                                id="password"
                                name="password"
                                class="form-input"
                                placeholder="Min 8 characters"
                                autocomplete="new-password"
                                minlength="8"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="password_confirm">Confirm Password</label>
                            <input
                                type="password"
                                id="password_confirm"
                                name="password_confirm"
                                class="form-input"
                                placeholder="Repeat password"
                                autocomplete="new-password"
                                minlength="8"
                                required
                            >
                        </div>
                    </div>
                </div>

                <div class="setup-section">
                    <h3 class="setup-section-title">ZeroTier Connection</h3>
                    <div class="form-group">
                        <label for="zt_token">Auth Token</label>
                        <input
                            type="password"
                            id="zt_token"
                            name="zt_token"
                            class="form-input mono"
                            placeholder="Paste your ZeroTier authtoken.secret"
                            required
                        >
                        <p class="form-hint">
                            Usually found at <code>/var/lib/zerotier-one/authtoken.secret</code>
                        </p>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Complete Setup</button>
            </form>
        </div>
    </div>
</body>
</html>
